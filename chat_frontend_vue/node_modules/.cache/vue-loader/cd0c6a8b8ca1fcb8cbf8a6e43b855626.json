{"remainingRequest":"E:\\Study\\杉达\\Jee项目实践\\大作业\\project\\chat_frontend_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Study\\杉达\\Jee项目实践\\大作业\\project\\chat_frontend_vue\\src\\components\\GroupSetting.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Study\\杉达\\Jee项目实践\\大作业\\project\\chat_frontend_vue\\src\\components\\GroupSetting.vue","mtime":1593001185545},{"path":"E:\\Study\\杉达\\Jee项目实践\\大作业\\project\\chat_frontend_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Study\\杉达\\Jee项目实践\\大作业\\project\\chat_frontend_vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Study\\杉达\\Jee项目实践\\大作业\\project\\chat_frontend_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\Study\\杉达\\Jee项目实践\\大作业\\project\\chat_frontend_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Study\\杉达\\Jee项目实践\\大作业\\project\\chat_frontend_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJHcm91cFNldHRpbmciLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzaG93OiBudWxsLAogICAgICAgICAgICBjdXJyZW50Um9sZUlkOiBudWxsLAogICAgICAgICAgICBzYXZlQnV0dG9uOiAn5L+d5a2YJywKICAgICAgICAgICAgZGlzYmFuZEJ1dHRvbjogJ+ino+aVo+ivpee+pCcsCiAgICAgICAgICAgIG1hc3Rlck5hbWU6IG51bGwsCiAgICAgICAgICAgIGdyb3VwU2V0dGluZzogdGhpcy4kc3RvcmUuc3RhdGUucXVlcnlSZXN1bHQsCiAgICAgICAgICAgIG1lbWJlckxpc3Q6IHsKICAgICAgICAgICAgICAgICJpZCI6IG51bGwsCiAgICAgICAgICAgICAgICAibmFtZSI6IG51bGwsCiAgICAgICAgICAgICAgICAibmlja25hbWUiOiBudWxsLAogICAgICAgICAgICAgICAgImdlbmRlciI6IG51bGwsCiAgICAgICAgICAgICAgICAiZ3JvdXBJZCI6IDAsCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICAvLyDmo4Dmn6XnvqTmnYPpmZAKICAgICAgICB0aGlzLmF4aW9zLmdldCgiL2dyb3VwL3F1ZXJ5VXNlclJvbGUvIiArIHRoaXMuZ3JvdXBTZXR0aW5nLmlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5jdXJyZW50Um9sZUlkID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgICAgLy/mkJzntKLnvqTkuLvnlKjmiLflkI0KICAgICAgICB0aGlzLmF4aW9zLmdldCgiL3VzZXIvcXVlcnlVc2VyLyIgKyB0aGlzLmdyb3VwU2V0dGluZy5tYXN0ZXJJZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMubWFzdGVyTmFtZSA9IHJlc3BvbnNlLmRhdGEubmFtZTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgICAgLy8g5ouJ5Y+W576k5oiQ5ZGYCiAgICAgICAgdGhpcy5heGlvcy5nZXQoIi9ncm91cC9tZW1iZXJzLyIgKyB0aGlzLmdyb3VwU2V0dGluZy5pZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMubWVtYmVyTGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0pOwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBzaG93QWN0aW9uKG1lbWJlcikgewogICAgICAgICAgICB0aGlzLnNob3cgPSBtZW1iZXI7CiAgICAgICAgfSwKICAgICAgICBzYXZlSW5mbygpIHsKICAgICAgICAgICAgZGVsZXRlIHRoaXMuZ3JvdXBTZXR0aW5nLmZsYWc7CiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmdyb3VwU2V0dGluZy5jcmVhdGVUaW1lOwogICAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QoJy9ncm91cC9jaGFuZ2VHcm91cEluZm8nLCB0aGlzLmdyb3VwU2V0dGluZykudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnNhdmVCdXR0b24gPSAi5L+d5a2Y5oiQ5Yqf77yBIjsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvdXNlci9ncm91cCIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEdyb3VwTGlzdCcsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgcm91dGVyLnJlcGxhY2UoIi9tYWluL2dyb3VwY2hhdCIpOwogICAgICAgICAgICAgICAgfSwgMTAwMCkKICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgYWxlcnQoZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBzZXRBZG1pbih1c2VySWQpIHsKICAgICAgICAgICAgdGhpcy5heGlvcy5wb3N0KCcvZ3JvdXAvc2V0VXNlck1hbmFnZVJvbGUvJyArIHRoaXMuZ3JvdXBTZXR0aW5nLmlkICsgJy8nICsgdXNlcklkKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsKICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YSkKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICByZW1vdmVBZG1pbih1c2VySWQpIHsKICAgICAgICAgICAgdGhpcy5heGlvcy5wb3N0KCcvZ3JvdXAvcmVtb3ZlVXNlck1hbmFnZVJvbGUvJyArIHRoaXMuZ3JvdXBTZXR0aW5nLmlkICsgJy8nICsgdXNlcklkKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsKICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YSkKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICByZW1vdmVNZW1iZXIodXNlcklkKSB7CiAgICAgICAgICAgIHRoaXMuYXhpb3MucG9zdCgnL2dyb3VwLy9yZW1vdmVHcm91cFVzZXIvJyArIHRoaXMuZ3JvdXBTZXR0aW5nLmlkICsgJy8nICsgdXNlcklkKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsKICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YSkKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBkaXNiYW5kR3JvdXAoKSB7CiAgICAgICAgICAgIHRoaXMuYXhpb3MucG9zdCgnL2dyb3VwL2Rpc3NvbHV0ZS8nICsgdGhpcy5ncm91cFNldHRpbmcuaWQpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5kaXNiYW5kQnV0dG9uID0gJ+ino+aVo+aIkOWKnyc7CiAgICAgICAgICAgICAgICAvLyDojrflj5bnvqTnu4QKICAgICAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvdXNlci9ncm91cCIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0R3JvdXBMaXN0JywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyLnJlcGxhY2UoIi93ZWxjb21lIikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goJy9tYWluJyk7CiAgICAgICAgICAgICAgICB9LCAxMDAwKQogICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhKQogICAgICAgICAgICB9KTsKCiAgICAgICAgfQogICAgfSwKfQoK"},{"version":3,"sources":["GroupSetting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"GroupSetting.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"content\">\r\n        <div class=\"header\">\r\n            <div class=\"backButton\" @click=\"$router.push('/main/groupchat')\">< Back</div>\r\n            <div class=\"title\">\r\n                <span>群设置</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"groupInfo\">\r\n            <div class=\"infoRow\">群主：{{masterName}}</div>\r\n            <div class=\"infoRow\">群名：<input type=\"text\" size=\"15\" :placeholder=\"this.groupSetting.name\"\r\n                                           v-model=\"groupSetting.name\"></div>\r\n            <div class=\"infoRow\" style=\"border: none\">群介绍</div>\r\n            <div class=\"infoRow\" style=\"margin-top: 5px;height: 100px\">\r\n                <textarea :placeholder=\"groupSetting.info\" v-model=\"groupSetting.info\"></textarea>\r\n            </div>\r\n            <div class=\"infoRow save\" @click=\"saveInfo\" v-text=\"saveButton\"></div>\r\n            <div class=\"infoRow disband\" @click=\"disbandGroup\" v-text=\"disbandButton\"></div>\r\n        </div>\r\n        <div class=\"groupMember\">\r\n            <div class=\"infoRow\" style=\"margin: 50px 0\"><h2>群成员</h2></div>\r\n            <div class=\"memberBox\">\r\n                <div class=\"member\" v-for=\"member in memberList\" v-if='memberList[0]'\r\n                     @mouseenter=\"showAction(member.id)\" @mouseleave=\"show = null\">\r\n                    <span class=\"chara\">[{{member.groupId === 2 ? '群主' : member.groupId === 1 ? '管理员' : '群员' }}] </span>\r\n                    <span class=\"name\">{{member.name}}</span>\r\n                    <div class=\"actionBox\" v-show=\"member.id === show\">\r\n                        <span class=\"setAdmin\" v-show=\"currentRoleId === 2 && member.groupId === 0\"\r\n                              @click=\"setAdmin(member.id)\">设为管理员</span>\r\n                        <span class=\"removeAdmin\" v-show=\"currentRoleId === 2 && member.groupId === 1\"\r\n                              @click=\"removeAdmin(member.id)\">取消管理员</span>\r\n                        <span class=\"removeMember\" v-show=\"currentRoleId > member.groupId\"\r\n                              @click=\"removeMember(member.id)\">移出群聊</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import router from \"../router\";\r\n\r\n    export default {\r\n        name: \"GroupSetting\",\r\n        data() {\r\n            return {\r\n                show: null,\r\n                currentRoleId: null,\r\n                saveButton: '保存',\r\n                disbandButton: '解散该群',\r\n                masterName: null,\r\n                groupSetting: this.$store.state.queryResult,\r\n                memberList: {\r\n                    \"id\": null,\r\n                    \"name\": null,\r\n                    \"nickname\": null,\r\n                    \"gender\": null,\r\n                    \"groupId\": 0,\r\n                }\r\n            }\r\n        },\r\n        mounted() {\r\n            // 检查群权限\r\n            this.axios.get(\"/group/queryUserRole/\" + this.groupSetting.id).then(response => {\r\n                this.currentRoleId = response.data;\r\n            }).catch(function (error) {\r\n                console.log(error.response.data);\r\n            });\r\n            //搜索群主用户名\r\n            this.axios.get(\"/user/queryUser/\" + this.groupSetting.masterId).then(response => {\r\n                this.masterName = response.data.name;\r\n            }).catch(function (error) {\r\n                console.log(error.response.data);\r\n            });\r\n            // 拉取群成员\r\n            this.axios.get(\"/group/members/\" + this.groupSetting.id).then(response => {\r\n                this.memberList = response.data;\r\n            }).catch(function (error) {\r\n                console.log(error.response.data);\r\n            });\r\n        },\r\n        methods: {\r\n            showAction(member) {\r\n                this.show = member;\r\n            },\r\n            saveInfo() {\r\n                delete this.groupSetting.flag;\r\n                delete this.groupSetting.createTime;\r\n                this.axios.post('/group/changeGroupInfo', this.groupSetting).then(() => {\r\n                    this.saveButton = \"保存成功！\";\r\n                    setTimeout(() => {\r\n                        this.axios.get(\"/user/group\").then(response => {\r\n                            this.$store.commit('setGroupList', response.data);\r\n                        })\r\n                        router.replace(\"/main/groupchat\");\r\n                    }, 1000)\r\n                }).catch(error => {\r\n                    alert(error.response.data.message);\r\n                });\r\n            },\r\n            setAdmin(userId) {\r\n                this.axios.post('/group/setUserManageRole/' + this.groupSetting.id + '/' + userId).then(() => {\r\n                    this.$router.go(0);\r\n                }).catch(error => {\r\n                    console.log(error.response.data)\r\n                });\r\n            },\r\n            removeAdmin(userId) {\r\n                this.axios.post('/group/removeUserManageRole/' + this.groupSetting.id + '/' + userId).then(() => {\r\n                    this.$router.go(0);\r\n                }).catch(error => {\r\n                    console.log(error.response.data)\r\n                });\r\n            },\r\n            removeMember(userId) {\r\n                this.axios.post('/group//removeGroupUser/' + this.groupSetting.id + '/' + userId).then(() => {\r\n                    this.$router.go(0);\r\n                }).catch(error => {\r\n                    console.log(error.response.data)\r\n                });\r\n            },\r\n            disbandGroup() {\r\n                this.axios.post('/group/dissolute/' + this.groupSetting.id).then(() => {\r\n                    this.disbandButton = '解散成功';\r\n                    // 获取群组\r\n                    this.axios.get(\"/user/group\").then(response => {\r\n                        this.$store.commit('setGroupList', response.data);\r\n                    }).catch((error) => {\r\n                        if (error.response.status === 401) {\r\n                            router.replace(\"/welcome\")\r\n                        }\r\n                    })\r\n                    setTimeout(function () {\r\n                        router.push('/main');\r\n                    }, 1000)\r\n                }).catch(error => {\r\n                    console.log(error.response.data)\r\n                });\r\n\r\n            }\r\n        },\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    .content {\r\n        padding: 25px;\r\n    }\r\n\r\n    .header {\r\n        width: 100%;\r\n        height: 60px;\r\n        border-bottom: 1px solid #CCCCCC;\r\n        text-align: right;\r\n    }\r\n\r\n    .title {\r\n        height: 100%;\r\n        font-size: 24px;\r\n        font-weight: bolder;\r\n        text-align: center;\r\n        line-height: 70px;\r\n    }\r\n\r\n    .backButton {\r\n        position: absolute;\r\n        cursor: pointer;\r\n        font-size: 20px;\r\n        color: #888888;\r\n    }\r\n\r\n    .infoRow {\r\n        text-align: center;\r\n        height: 50px;\r\n        margin: 0 200px;\r\n        font-size: 16px;\r\n        line-height: 70px;\r\n        border-bottom: 1px solid #CCCCCC;\r\n    }\r\n\r\n    .groupInfo textarea {\r\n        width: 230px;\r\n        height: 85px;\r\n        margin-bottom: 10px;\r\n        border-bottom: 1px solid #CCCCCC;\r\n    }\r\n\r\n    .save {\r\n        font-weight: bold;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .memberBox {\r\n        width: 604px;\r\n        margin: 0 auto;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n    }\r\n\r\n    .member {\r\n        width: 300px;\r\n        height: 50px;\r\n        line-height: 40px;\r\n        border: 1px solid #CCCCCC;\r\n        box-sizing: border-box;\r\n        padding: 5px;\r\n        margin: 1px;\r\n    }\r\n\r\n    .actionBox {\r\n        float: right;\r\n    }\r\n\r\n    .setAdmin {\r\n        color: green;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .removeAdmin {\r\n        color: gray;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .removeMember {\r\n        margin-left: 10px;\r\n        color: red;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .disband {\r\n        color: red;\r\n        font-weight: bold;\r\n        cursor: pointer;\r\n    }\r\n</style>"]}]}